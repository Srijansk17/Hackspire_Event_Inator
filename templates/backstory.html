<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backstory</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden; /* Hide overflow to prevent scrollbars during transition */
            background-color: #000; /* Black background for smooth transitions */
            font-family: 'Inter', sans-serif;
        }

        /* Container for the YouTube video */
        #video-container {
            position: absolute; /* Position over the entire screen */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex; /* Center the video */
            justify-content: center;
            align-items: center;
            z-index: 10; /* Ensure video is on top initially */
            opacity: 1; /* Start fully visible */
            transition: opacity 2s ease-in-out; /* Smooth fade-out for the video */
        }

        /* Styling for the embedded YouTube iframe */
        #video-container iframe {
            width: 100%; /* Make video take full width of its container */
            height: 100%; /* Make video take full height of its container */
            aspect-ratio: 16 / 9; /* Maintain aspect ratio */
        }

        /* Container for the backstory image */
        #backstory-image-container { /* Changed ID to container */
            position: absolute; /* Position over the entire screen */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex; /* Use flexbox to center the image */
            justify-content: center;
            align-items: center;
            opacity: 0; /* Start fully transparent */
            transition: opacity 2s ease-in-out; /* Smooth fade-in for the image */
            z-index: 5; /* Image is behind the video initially */
        }

        #backstory-image { /* New ID for the actual image tag */
            max-width: 100%; /* Ensure image scales down */
            max-height: 100%; /* Ensure image scales down */
            object-fit: contain; /* Ensures the entire image is visible, no cropping */
            display: block; /* Remove extra space below image */
        }

        /* Style for the clickable overlay - now applies to map area */
        .image-link-overlay {
            /* No longer directly used as a div, but left for context if needed */
            display: none;
        }

        /* Responsive adjustments for smaller screens (Tailwind-like approach for responsiveness) */
        @media (max-width: 768px) {
            #video-container iframe {
                width: 100%; /* Adjust width for smaller screens */
                height: 100%; /* Auto height to maintain aspect ratio */
            }
        }
    </style>
</head>
<body>

    <div id="video-container">
        <iframe src="https://www.youtube.com/embed/3GAbYf-zDoE?autoplay=1&mute=1&playsinline=1"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen>
        </iframe>
    </div>

    <div id="backstory-image-container">
         <meta charset="UTF-8">
           

        <img id="backstory-image" src="{{ url_for('static', filename='backstory.jpg') }}" usemap="#mysterymap" alt="Backstory Image" width="ORIGINAL_WIDTH" height="ORIGINAL_HEIGHT">
        <map name="mysterymap">
             <!-- Approximate coordinates for the note area with the link -->
            <area shape="rect" coords=" 180, 108, 240, 158"    
                href="https://blood-bound-login.lovable.app/" 
                 target="_blank" 
                  alt="Hidden Link">
        </map>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const videoContainer = document.getElementById('video-container');
            const backstoryImageContainer = document.getElementById('backstory-image-container'); // Changed ID
            const backstoryImage = document.getElementById('backstory-image');
            // The link overlay div is no longer directly used as a clickable element,
            // but the `display` property is still toggled to ensure previous logic behaves similarly
            const backstoryLinkOverlay = document.getElementById('backstory-link-overlay');
            const videoElement = videoContainer.querySelector('iframe');

            // Duration to show the video before transitioning, in milliseconds (e.g., 60 seconds for 1 minute)
            const videoDisplayDuration = 10000; // 1 minute

            // Set a timeout to trigger the transition
            setTimeout(() => {
                // Start fading out the video
                videoContainer.style.opacity = 0;

                // Start fading in the image simultaneously
                backstoryImageContainer.style.opacity = 1; // Fade in the container

                // After a short delay, conceptually "make the link overlay visible"
                // For the map, the clickable area is always active once the image is visible.
                // The original backstoryLinkOverlay div is now just a placeholder if needed for other visual effects.
                setTimeout(() => {
                    // This line might not be strictly necessary if backstoryLinkOverlay is completely removed.
                    // Kept for consistency with original script's flow.
                    if (backstoryLinkOverlay) {
                        backstoryLinkOverlay.style.display = 'none'; // Ensure the old overlay is hidden
                    }
                }, 1000); // This delay ensures the map is active after the image starts fading in

                // After the fade transition (which is 2 seconds, as per CSS), hide the video container entirely
                // This prevents it from potentially blocking interaction or being in the DOM unnecessarily
                setTimeout(() => {
                    videoContainer.style.display = 'none';
                }, 2000); // This duration should match the CSS transition duration
            }, videoDisplayDuration); // This is the initial delay before the fade starts
        });
    </script>

</body>
</html>
